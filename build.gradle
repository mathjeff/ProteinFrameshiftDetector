plugins {
  id "com.gradleup.shadow" version "8.3.0"
}

apply plugin: "java"

compileJava {
  sourceCompatibility = 1.8
  targetCompatibility = 1.8
}

String mainClass = "FrameshiftDetector.Main"

jar {
  manifest {
    attributes 'Main-Class': mainClass
  }
}

shadowJar {
  archiveClassifier = null
}

dependencies {
  testImplementation "junit:junit:4.13"
  def mapperJar = project.files("./mapper/build/libs/x-mapper.jar")
  implementation(mapperJar)
  runtimeOnly(mapperJar)
}

tasks["compileJava"].dependsOn(gradle.includedBuild("mapper").task(":assemble"))

tasks["jar"].enabled = false

repositories {
  mavenCentral()
}
